<!-- Full-width patch injected from footer -->
<script>
    console.log('[fullwidth] footer_custom loaded');

    (function () {
        function applyFullWidth() {
            var main = document.querySelector('div.main#top');
            if (!main) return;

            // інлайн + !important (сильніше за тему)
            main.style.setProperty('margin', '0', 'important');
            main.style.setProperty('max-width', 'none', 'important');
            main.style.setProperty('width', '100%', 'important');

            // відступ під реальну ширину сайдбару на десктопі
            var mq = window.matchMedia('(min-width: 50rem)');
            var sidebar = document.querySelector('.side-bar');
            if (mq.matches && sidebar) {
                var w = sidebar.getBoundingClientRect().width;
                main.style.setProperty('margin-left', w + 'px', 'important');
            } else {
                main.style.setProperty('margin-left', '0', 'important');
            }
        }

        if (document.readyState !== 'loading') applyFullWidth();
        else document.addEventListener('DOMContentLoaded', applyFullWidth);

        window.addEventListener('resize', applyFullWidth);
        new MutationObserver(applyFullWidth)
            .observe(document.documentElement, { childList: true, subtree: true });
    })();
</script>

<style>
    /* Фолбек, якщо JS заблокується */
    .main { margin: 0 !important; }
    @media (min-width: 50rem) {
        .main { position: relative; max-width: none !important; width: 100% !important; }
        .side-bar + .main { margin-left: 15.5rem !important; }
    }
    .main-content-wrap { max-width: none !important; }
</style>
<!-- Full-width patch injected from footer -->
<script>
    (function () {
        function applyFullWidth() {
            var main = document.querySelector('div.main#top');
            var sidebar = document.querySelector('.side-bar');
            if (!main) return;

            // скидаємо обмеження
            main.style.setProperty('max-width', 'none', 'important');
            main.style.setProperty('margin', '0', 'important');

            var desktop = window.matchMedia('(min-width: 50rem)').matches;

            if (desktop && sidebar) {
                var w = Math.ceil(sidebar.getBoundingClientRect().width); // реальна ширина сайдбару
                main.style.setProperty('margin-left', w + 'px', 'important');
                // ширина контенту = ширина вʼюпорта мінус ширина сайдбару
                main.style.setProperty('width', 'calc(100vw - ' + w + 'px)', 'important');
            } else {
                // мобілка: все як у теми, але без «капа»
                main.style.setProperty('margin-left', '0', 'important');
                main.style.setProperty('width', 'auto', 'important');
            }

            // на всякий випадок вимкнемо горизонтальний скрол
            document.documentElement.style.setProperty('overflow-x', 'hidden');
            document.body.style.setProperty('overflow-x', 'hidden');
        }

        if (document.readyState !== 'loading') applyFullWidth();
        else document.addEventListener('DOMContentLoaded', applyFullWidth);

        window.addEventListener('resize', applyFullWidth);
        new MutationObserver(applyFullWidth).observe(document.documentElement, { childList: true, subtree: true });
    })();
</script>

<style>
    /* Фолбек, якщо JS раптом заблокований */
    .main { margin: 0 !important; max-width: none !important; }
    .main-content-wrap { max-width: none !important; }
</style>